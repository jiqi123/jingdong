function CtoH(e){for(var t=e.value,n="",i=0;i<t.length;i++)n+=12288!=t.charCodeAt(i)?t.charCodeAt(i)>65280&&t.charCodeAt(i)<65375?String.fromCharCode(t.charCodeAt(i)-65248):String.fromCharCode(t.charCodeAt(i)):String.fromCharCode(t.charCodeAt(i)-12256);return e.value=n,n}function refreshAuth(){var e="/cgi-bin/m/authcode?mod\x3dlogin\x26v\x3d"+Math.random();$("#imgCode").attr("src",e)}function toast(e,f){f||(f=2E3);$(".toast").html(e);$(".toast-ui").show();clearTimeout(g);var g=setTimeout(function(){clearTimeout(g);$(".toast-ui").hide()},f)}function openApp(e,f){function g(f){function b(){e++;var m=+new Date-h;150<=e?(clearTimeout(g),f(0)):3300<m?(clearTimeout(g),f(1)):g=setTimeout(b,20)}var h=+new Date,e=0,g;g=setTimeout(b,20)}var h=navigator.userAgent.toLowerCase();if(-1<h.indexOf("ios")||-1<h.indexOf("iphone")||-1<h.indexOf("mac")||-1<h.indexOf("ipad")||-1<h.indexOf("ipod"))window.location.href=e;else{var b=document.createElement("iframe");b.src=e;b.style.display="none";document.body.appendChild(b);setTimeout(function(){document.body.removeChild(b)},2E3)}f&&g(function(b){f&&f(b)})}$(function(){function e(){function e(a){$(".pop-msg").html(a.msg);$(".btn-continue").attr("href",a.url).html(a.btn);$(".pop-dialog").show()}function k(){$(".txt-input").on("input",function(){$(this).siblings("i").show();l()?$("#loginBtn").addClass("btn-active"):$("#loginBtn").removeClass("btn-active")})}function l(){var a=!0;$(".txt-input").each(function(){if(!$(this).val())return a=!1});return a}function n(){$("#loginBtn").addClass("btn-active-disable").html(language.code_25);$(".notice").html(" ");var a=r();a.risk_jd="";try{a.risk_jd=getJdEid()}catch(c){}var d=(new Date).getTime();$.ajax({url:"/cgi-bin/m/domlogin",type:"POST",data:a,dataType:"json",success:function(c){$("#loginBtn").removeClass("btn-active-disable").html(language.code_8);var b=(new Date).getTime()-d;window.pl_report({interfaceID:393217,loginName:a.username,callTime:b,status:c.errcode});if(0==c.errcode)c.hk_autologin?$.ajax({url:c.hk_url,type:"get",dataType:"jsonp",timeout:15E3,complete:function(){setTimeout(function(){location.href=c.succcb},200)}}):setTimeout(function(){location.href=c.succcb},200);else switch(c.needauth?($("#loginBtn").removeClass("btn-active"),$("#input-code").show().find("input").addClass("txt-input"),_need_ck=!0,refreshAuth()):($("#input-code").hide().find("input").removeClass("txt-input"),_need_ck=!1),k(),c.errcode){case 6:$(".notice").html(c.message);break;case 7:$(".notice").html(c.message);break;case 257:$(".notice").html(c.message);break;case 128:case 129:case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 141:case 142:case 143:e({msg:c.message,btn:language.code_26,url:c.succcb});break;case 100:e({msg:language.code_27,btn:language.code_26,url:"tel:4006065500"});break;case 103:e({msg:c.message,btn:language.code_11,url:"https://passport.m.jd.com/findloginpassword/fillAccountName.action"});break;case 105:location.href=c.succcb;break;default:$(".notice").html(c.message)}},error:function(){$(".notice").html(language.code_28);$("#loginBtn").removeClass("btn-active-disable").html(language.code_8);var c=(new Date).getTime()-d;window.pl_report({interfaceID:393217,loginName:a.username,callTime:c,status:"255"})}})}function q(a){var d;return(d=document.cookie.match(new RegExp("(^| )"+a+"\x3d([^;]*)(;|$)")))?unescape(d[2]):null}function p(){var a=(new Date).getTime();clearInterval(h);h=setInterval(function(){$.ajax({url:"/cgi-bin/m/tmauthchecktoken"+location.search+"\x26token\x3d"+f+"\x26ou_state\x3d"+g+"\x26okl_token\x3d"+q("okl_token"),type:"get",dataType:"json",success:function(d){var c=(new Date).getTime()-a;window.pl_report({interfaceID:1048581,loginName:"",callTime:c,status:d.errcode});0==d.errcode&&(location.href=d.jump_url);18E4<c&&clearInterval(h)},error:function(a){console.log(a)}})},3E3)}function r(){var a={};a.username=$("#username").val();a.pwd=$("#password").val();var d=str_rsaString;setMaxDigits(131);d=new RSAKeyPair("3","10001",d,1024);d=window.btoa(encryptedString(d,a.pwd,RSAAPP.PKCS1Padding,RSAAPP.RawEncoding));a.pwd=d;a.remember=b;a.s_token=str_kenString;try{a.dat=getDat(a.username,a.pwd),a.wlfstk_datk=getDat(a.username,a.pwd)}catch(c){}_need_ck&&(a.authcode=$("#code").val());return a}$("#loginOneStep").on("click",function(){var a=this,d=kpkeyBtn?{remember:b,kpkey:theRequest.kpkey}:{remember:b};if(!$(this).hasClass("btn-invalid")){$(this).addClass("btn-invalid");$(this).html(language.code_20);var c=(new Date).getTime();$.ajax({url:"/cgi-bin/m/tmauthreflogurl?s_token\x3d"+str_kenString+"\x26v\x3d"+(new Date).getTime(),type:"get",dataType:"json",data:d,success:function(b){var d=(new Date).getTime()-c;g=b.ou_state;window.pl_report({interfaceID:1048577,loginName:"",callTime:d,status:b.errcode});0==b.errcode?($(a).css("display",b.onekeylog_switch),f=b.token,1!=b.checklogin&&(b.need_poll&&p(),openApp(b.onekeylog_url,function(b){b||kpkeyBtn||toast('"'+language.code_21+'"\uff0c\x3ca href\x3d"javascript:;" style\x3d"color:#f23030;" class\x3d"J_ping" report-eventid\x3d"MLoginRegister_Msetup"\x3e"'+language.code_22+'"\x3c/a\x3e',4E3);$(a).removeClass("btn-invalid").html(language.code_9)}))):(toast(b.message),$(a).removeClass("btn-invalid").html(language.code_9))},error:function(){toast(language.code_23);$(a).removeClass("btn-invalid").html(language.code_9)}})}});kpkeyBtn&&$("#loginOneStep").trigger("click");_need_ck&&$("#code").addClass("txt-input");$(".J_ping").on("click",function(){var a=$(this).attr("report-eventid");mdUpdata(a)});$(".toast").on("click",function(){if($(this).find("a.J_ping")){var a=$(this).find("a.J_ping").attr("report-eventid");mdUpdata(a);setTimeout(function(){window.location.href="//h5.m.jd.com/active/download/download.html?channel\x3djd-mlogin"},100)}});$("#imgCode").on("click",function(){refreshAuth()});$(".quickReg").on("click",function(){setTimeout(function(){location.href="/cgi-bin/m/mreg"+location.search},100)});$(".findpwd").on("click",function(){setTimeout(function(){location.href="/cgi-bin/m/mfindpwd"+location.search},100)});$(".quick-qq").on("click",function(){setTimeout(function(){location.href="/cgi-bin/m/qqlogin"},100)});$(".quick-wx").on("click",function(){setTimeout(function(){location.href="/cgi-bin/m/wxlogin"},100)});$(".icon-goback").on("click",function(){window.history.back()});$("#remberme").on("click",function(a){b=!b});$(".label-checkbox").on("click",function(){var a=$(this).find("input").prop("checked");a?$(this).siblings("input").attr("type","password"):$(this).siblings("input").attr("type","text");$(this).find("input").prop("checked",!a)});$(".btn-cancel").on("click",function(){$(this).parents(".pop-dialog").hide()});$(".btn-continue").on("click",function(){$(this).parents(".pop-dialog").hide()});$(".acc-input").on("focus",function(){$(this).siblings("i").show()}).on("blur",function(){var a=this;setTimeout(function(){$(a).siblings("i").hide()},200)});$(".icon-clear").on("click",function(){$(this).siblings("input").val("").focus();$(this).hide();l()?$("#loginBtn").addClass("btn-active"):$("#loginBtn").removeClass("btn-active")});k();$("#loginBtn").on("click",function(){if($(this).hasClass("btn-active"))n();else return!1})}var f=null,g=null,h=null,b=!0;$(document).ready(function(){e()})});